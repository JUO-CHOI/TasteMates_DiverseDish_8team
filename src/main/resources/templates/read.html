<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <meta charset="UTF-8">
    <title>Read</title>
</head>
<body>
<p>카테고리 : [[${recipe.category}]]</p>
<h1>[[${recipe.title}]]</h1>
<p>[[${recipe.description}]]</p><br>
<div th:unless="${recipe.video_link.equals(null)}">
    <iframe width="560" height="315" th:src="@{{link} (link = ${recipe.video_link})}" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
</div>
<h3>난이도</h3>
<p>[[${recipe.level}]]</p>

<script type="text/javascript">     str = "[[${recipe.ingredient}]]";
    function returnIngredient(str) {
        const arr = str.split(",");
        const ingredient = new Array(arr.length / 2);
        var step = 0;
        while (arr.length > 0) {
            if (step % 2 === 0) {
                arr.pop();
            }
            else {
                ingredient.push(arr.pop());
            }
            step++;
        }
        return ingredient;
    }
    function returnAmount(str) {
        const arr = str.split(",");
        const amount = new Array(arr.length / 2);
        var step = 0;
        while (arr.length > 0) {
            if (step % 2 === 0) {
                amount.push(arr.pop());
            }
            else {
                arr.pop();
            }
            step++;
        }
        return amount;
    }

    const ingredientList = returnIngredient(str);
    const amountList = returnAmount(str);

    document.addEventListener("DOMContentLoaded", function() {
        const ingredientDiv = document.getElementById("ingredientList");
        const amountDiv = document.getElementById("amountList");

        ingredientList.forEach(ingredient => {
            const p = document.createElement("p");
            p.textContent = ingredient;
            ingredientDiv.appendChild(p);
        });

        amountList.forEach(amount => {
            const p = document.createElement("p");
            p.textContent = amount;
            amountDiv.appendChild(p);
        });
    });

</script>

<h3>재료</h3>
<div id="ingredientList" style="border: 1px; float: left; width: 30%; margin-top: 0;"></div>
<div id="amountList" style="border: 1px; float: left; width: 70%; margin-top: 0;"></div>
<h3>요리 순서</h3>
<div th:each="cookOrder : ${cookOrderList}">
    <p>[[${cookOrder.step}]] : [[${cookOrder.cooking_tip}]]</p>
    <p>[[${cookOrder.image}]]</p>
</div>

</body>
</html>